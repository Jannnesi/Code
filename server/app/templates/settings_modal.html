{# Settings modal: uses a similar style to chart modal, but separate assets #}
{{ assets.style(url_for('static', filename='css/settings_modal.css')) if assets is defined else '' }}
{{ assets.script(url_for('static', filename='js/settings_modal.js')) if assets is defined else '' }}

<div id="settingsModal">
  <div class="dialog">
    <div class="header">
      <h3 id="settingsTitle">Settings</h3>
      <button id="closeSettings" aria-label="Close">✕</button>
    </div>

    <div class="content">
      <!-- Sleep Settings Panel -->
      <div id="sleepPanel" class="panel" hidden>
        <h4>Sleep</h4>
        <div class="form-grid">
          <div class="row">
            <label>Enabled</label>
            <button id="btnSleepToggle" class="btn">Enable Sleep</button>
          </div>
          <div class="row"><em style="color:#aaa; font-size:0.9rem;">Set a time window for each weekday:</em></div>
          <div class="row"><label>Mon</label><input id="sleep_mon_start" type="time" /><span>–</span><input id="sleep_mon_stop" type="time" /></div>
          <div class="row"><label>Tue</label><input id="sleep_tue_start" type="time" /><span>–</span><input id="sleep_tue_stop" type="time" /></div>
          <div class="row"><label>Wed</label><input id="sleep_wed_start" type="time" /><span>–</span><input id="sleep_wed_stop" type="time" /></div>
          <div class="row"><label>Thu</label><input id="sleep_thu_start" type="time" /><span>–</span><input id="sleep_thu_stop" type="time" /></div>
          <div class="row"><label>Fri</label><input id="sleep_fri_start" type="time" /><span>–</span><input id="sleep_fri_stop" type="time" /></div>
          <div class="row"><label>Sat</label><input id="sleep_sat_start" type="time" /><span>–</span><input id="sleep_sat_stop" type="time" /></div>
          <div class="row"><label>Sun</label><input id="sleep_sun_start" type="time" /><span>–</span><input id="sleep_sun_stop" type="time" /></div>
          {# Saving happens automatically on change #}
        </div>
      </div>

      <!-- Thermostat Settings Panel -->
      <div id="thermoPanel" class="panel" hidden>
        <h4>Thermostat</h4>
        <div class="form-grid">
          <div class="row">
            <label>Sensors</label>
            <div id="ctrlLocContainer" class="loc-select"></div>
          </div>
          <div class="row">
            <label for="modalSetpointC">Target (°C)</label>
            <input class="field-input" id="modalSetpointC" type="number" step="0.1" min="5" max="35" />
          </div>
          <div class="row">
            <label for="modalHysteresisNeg">-Hysteresis (°C)</label>
            <input class="field-input" id="modalHysteresisNeg" type="number" step="0.1" min="0.1" max="10" />
          </div>
          <div class="row">
            <label for="modalHysteresisPos">+Hysteresis (°C)</label>
            <input class="field-input" id="modalHysteresisPos" type="number" step="0.1" min="0.1" max="10" />
          </div>
          {# Saving happens automatically on change #}
        </div>
      </div>
    </div>
  </div>
  <div class="backdrop" aria-hidden="true"></div>
</div>
