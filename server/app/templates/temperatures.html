{% extends 'base.html' %}

{% block title %}Server Sensors{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/chart_modal.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/temperatures.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/flash.css') }}">
{% endblock %}

{% block content %}
<div class="container">
  <div id="acPanel" class="ac-panel">
    <div class="ac-title">AC</div>
    <div class="ac-status">
      <span id="acStatusPill" class="ac-pill ac-unknown">Unknown</span>
      <span id="thermoStatusPill" class="ac-pill ac-unknown">—</span>
    </div>
    <div class="ac-controls">
      <div class="ctrl-group">
        <label for="acMode">Mode</label>
        <select id="acMode">
          <option value="cold">Cold</option>
          <option value="wet">Dry</option>
          <option value="wind">Fan</option>
        </select>
      </div>
      <div class="ctrl-group">
        <label for="acFan">Fan</label>
        <select id="acFan">
          <option value="low">Low</option>
          <option value="high">High</option>
        </select>
      </div>
      <button id="btnAcPowerToggle" class="btn">Toggle AC</button>
      <button id="btnThermoToggle" class="btn">Toggle Thermostat</button>
    </div>
  </div>
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="flash-container" style="max-width:800px; margin:20px auto;">
      {% for category, msg in messages %}
      <div class="flash {{ category }}">{{ msg }}</div>
      {% endfor %}
    </div>
    {% endif %}
  {% endwith %}

  <h2 class="section-title">Lämpötila ja kosteus</h2>
  <div id="locationsGrid" class="locations-grid"></div>
</div>
{% include 'chart_modal.html' %}
{% endblock %}

{% block scripts %}
<script>
  window.LOCATIONS = {{ locations | tojson }};
</script>
<script src="{{ url_for('static', filename='js/chart_modal.js') }}"></script>
<script src="{{ url_for('static', filename='js/init_sio.js') }}"></script>
<script src="{{ url_for('static', filename='js/temperatures.js') }}"></script>
<script src="{{ url_for('static', filename='js/flash.js') }}"></script>
{% endblock %}
